<!-- begin breadcrumb -->
<ol class="breadcrumb pull-right">
  <li class="breadcrumb-item"><a href="javascript:;">Home</a></li>
  <li class="breadcrumb-item">CS Center</li>
  <li class="breadcrumb-item"><a ui-sref="cs-center.contact-us.list">Contact Us Board</a></li>
  <li class="breadcrumb-item active">Contact Us Contents</li>

</ol>
<!-- end breadcrumb -->
<!-- begin page-header -->
<h1 class="page-header">Contact Us Contents</h1>
<!-- end page-header -->

<hr class="bg-grey-lighter" />

<div class="row">

  <!-- begin col-12 -->
  <div class="col-lg-12">
    <!-- begin panel -->
    <div class="panel panel-inverse">

      <!-- begin panel-heading -->
      <div class="panel-heading">
        <div class="panel-heading-btn">
          <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" panel-expand><i class="fa fa-expand"></i></a>
          <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" panel-reload><i class="fa fa-redo"></i></a>
          <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" panel-collapse><i class="fa fa-minus"></i></a>
          <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-danger" panel-remove><i class="fa fa-times"></i></a>
        </div>
        <h4 class="panel-title height-20">Contents</h4>
      </div>
      <!-- end panel-heading -->

      <!-- begin panel-body -->
      <div class="panel-body">
        <!-- begin wrapper -->
        <div class="wrapper">

          <div class="btn-group pull-right">
            <a ui-sref="cs-center.contact-us.list" class="btn btn-link btn-sm" uib-tooltip="Back" tooltip-placement="bottom">
              <i class="fa fa-list text-black"></i>
            </a>
            <a ui-sref="cs-center.contact-us.edit({contactUsId: vm.contactUs._id})" uib-tooltip="Edit" tooltip-placement="bottom" class="btn btn-link btn-sm">
              <i class="fa fa-edit text-black"></i>
            </a>
          </div>
          <h5 class="m-t-0 m-b-15 f-w-500">
            <span provider>{{vm.contactUs.providers[0]}}</span>
            <i ng-if="vm.contactUs.contactUsType === 'private'" class="fas fa-lock text-danger"></i> {{vm.contactUs.title}} <span class="text-danger">({{vm.contactUs.comments.length}})</span></h5>
          <ul class="media-list underline m-b-15 p-b-15">
            <li class="media media-xs clearfix">
              <a href="javascript:;" class="pull-left">
                <img class="media-object rounded-corner" alt="" ng-src="{{vm.contactUs.user.profileImage}}" />
              </a>
              <div class="media-body">
                <div class="email-from text-inverse f-s-14 f-w-600 m-b-3">
                  {{(vm.contactUs.user.englishName)? vm.contactUs.user.englishName: vm.contactUs.user.nickName}}
                  <small>
                    &lt;{{vm.contactUs.user.koreanName}}, {{vm.contactUs.user.username}}&gt;
                    <br />
                    <i class="fa fa-clock fa-fw"></i> {{vm.contactUs.created | date: 'yyyy-MM-dd HH:mm:ss'}}
                  </small>
                </div>
              </div>
            </li>
          </ul>
          <div class="f-s-12 text-inverse p-t-10" ng-bind-html="vm.contactUs.contents"></div>
        </div>
        <!-- end wrapper -->

      </div>
      <!-- end panel-body -->

      <!-- begin panel-footer -->
      <div class="panel-footer text-right">
        <button class="btn btn-danger btn-sm pull-left" ng-if="vm.auth.user.roles[0] !== 'tutor'" ng-click="vm.removeContactUs()">
          <i class="fa fa-trash"></i> Remove
        </button>
        <button class="btn btn-white btn-sm" ui-sref="cs-center.contact-us.list">
          <i class="fa fa-list"></i> List
        </button>
        <button class="btn btn-primary btn-sm" ng-if="vm.auth.user.roles[0] !== 'tutor'" ui-sref="cs-center.contact-us.edit({contactUsId: vm.contactUs._id})">
          <i class="fa fa-edit"></i> Edit
        </button>
      </div>
      <!-- end panel-footer -->


      <!-- begin panel-body -->
      <div class="panel-body bg-grey-transparent-2">

        <!-- begin textarea -->
        <div class="panel-footer text-right p-0" style="background: transparent">
          <form name="vm.form.replyCommentForm">
            <div class="form-group" show-errors>
              <textarea class="form-control no-rounded-corner" rows="3" name="newComment" placeholder="Please, write comment here!" ng-model="vm.comment.contents" required></textarea>
              <div ng-messages="vm.form.replyCommentForm.newComment.$error" role="alert">
                <p class="help-block error-text" ng-message="required">Comments is required.</p>
              </div>
            </div>
          </form>
          <a href="javascript:;" class="btn btn-white btn-sm" ng-click="vm.replyComment(vm.form.replyCommentForm.$valid)"><i class="fas fa-reply"></i> Reply</a>
        </div>
        <!-- end textarea -->

        <!-- begin comment -->
        <div class="media media-xs" ng-repeat="comment in vm.contactUs.comments">
          <a class="media-left" href="javascript:;">
            <img ng-src="{{comment.user.profileImage}}" alt="" class="media-object" />
          </a>
          <div class="media-body">
            <h4 class="media-heading reply-wrapper f-s-14">{{comment.user.nickName}}
              <small ng-class="{'shadow-line': vm.auth.user.username === comment.user.username}"><i class="fa fa-clock fa-fw"></i> {{comment.created | date: 'yyyy-MM-dd HH:mm:ss'}}</small>
              <div class="btn btn-group" ng-if="vm.auth.user.username === comment.user.username">
                <button ng-click="vm.openEditComment(comment)" class="btn btn-link btn-xs" uib-tooltip="Edit" tooltip-placement="right">
                  <i class="fa fa-edit text-black"></i>
                </button>
                <button ng-click="vm.removeComment(comment)" class="btn btn-link btn-xs" uib-tooltip="Remove" tooltip-placement="right">
                  <i class="fa fa-trash text-black"></i>
                </button>
              </div>
            </h4>
            <div ng-if="vm.currentComment._id !== comment._id" ng-bind-html="comment.contents"></div>
            <div ng-if="vm.currentComment._id === comment._id">

              <form name="vm.form.editCommentForm">
                <div class="form-group" show-errors>
                  <textarea class="form-control no-rounded-corner " rows="3" name="getComment" placeholder="Please, write comment here!" ng-model="vm.currentComment.contents" required></textarea>
                  <div ng-messages="vm.form.editCommentForm.getComment.$error" role="alert">
                    <p class="help-block error-text" ng-message="required">Comments is required.</p>
                  </div>
                </div>
                <div class="text-right m-t-10">
                  <a href="javascript:;" class="btn btn-primary btn-sm" ng-click="vm.editComment(vm.form.editCommentForm.$valid, vm.currentComment)"><i class="fas fa-check"></i> Submit</a>
                </div>
              </form>
            </div>
          </div>
        </div>
        <!-- end comment -->
      </div>
      <!-- end panel-body -->
    </div>
    <!-- end panel -->
  </div>
  <!-- end col-12 -->
</div>
